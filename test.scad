// set random seed for random twist amount
seed = 42;

// source: http://forum.openscad.org/max-of-more-than-2-values-td4190.html
function maximum(a,i)=(i < len(a)-1) ? max(a[i],maximum(a,i+1)) : 0;

/*
    n: number of tentacles
    h: height
    dh: height variation
    t: twist
    dt: twist variation
    o: offset
    w: width of tendrils
 */
module generate(heights, t, dt, o)
{    
    n = len(heights);
    m = maximum(heights, 0);
    randomt = rands(-dt,dt,n,seed);
    
    color( [heights[18]/m, heights[12]/m, heights[0]/m, 1.0] )
    for(i = [0:n-1])
    {
        // rotate using i as seed
        rotate(rands(0,360,3,heights[i]))
        {
            translate([-20, 0, 0])
                linear_extrude(height = heights[i]/(m/1000),
                               center = false, 
                               convexity = 10, 
                               twist = t + randomt[i], 
                               scale=-1, 
                               slices = 10)
                        translate([o, 0, 0])
                        circle(r = heights[i]/(m/100));
        }
    }
}

p_123456 = [2689, 3183, 2416, 2746, 1198, 1561, 1835, 1719, 888, 2547, 1635, 1948, 3691, 1438, 778, 2303, 247, 2226, 4634, 2619, 354, 665, 1021, 390, 427, 493];
p_password = [1022, 1311, 1143, 1151, 455, 488, 674, 537, 326, 1333, 672, 599, 1414, 533, 225, 852, 53, 858, 1624, 1083, 94, 104, 190, 45, 60, 63];
p_12345678 = [961, 704, 601, 744, 310, 451, 611, 330, 210, 621, 547, 435, 972, 374, 200, 564, 88, 535, 1414, 569, 65, 168, 113, 61, 90, 94];
p_qwerty = [824, 47, 429, 673, 439, 440, 555, 321, 461, 40, 612, 597, 873, 534, 364, 885, 26, 701, 1564, 771, 248, 526, 285, 6, 215, 311];
p_123456789 = [1050, 509, 357, 728, 301, 314, 421, 313, 262, 431, 594, 492, 802, 355, 246, 499, 88, 479, 1152, 394, 76, 328, 136, 75, 146, 166];
p_12345 = [785, 447, 469, 592, 367, 654, 774, 266, 151, 529, 347, 360, 641, 225, 165, 390, 48, 423, 1666, 369, 37, 107, 79, 30, 53, 51];
p_1234 = [449, 350, 362, 338, 207, 299, 290, 172, 72, 358, 221, 213, 421, 161, 94, 261, 33, 268, 633, 271, 18, 43, 31, 18, 28, 15];
p_111111 = [448, 289, 217, 380, 160, 171, 204, 135, 142, 202, 289, 217, 382, 176, 115, 246, 45, 240, 519, 215, 50, 159, 50, 24, 50, 61];
p_1234567 = [391, 268, 198, 244, 133, 139, 196, 114, 107, 207, 260, 172, 303, 141, 76, 229, 43, 178, 516, 199, 23, 89, 31, 19, 35, 43];
p_dragon = [183, 219, 190, 389, 74, 110, 152, 88, 43, 190, 144, 141, 249, 91, 36, 127, 13, 165, 353, 165, 10, 35, 39, 10, 10, 11];

generate(p_dragon, 500, 100, 40);